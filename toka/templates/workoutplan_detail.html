{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container py-5">
  <div class="card shadow-sm">
    {% if plan.image %}
      <img src="{{ plan.image.url }}" class="card-img-top" alt="{{ plan.title }}" style="object-fit: cover; height: 300px;">
    {% endif %}
    <div class="card-body">
      <h1 class="card-title">{{ plan.title }}</h1>
      <p class="card-text"><strong>Price:</strong> Â£{{ plan.price }}</p>
      <p class="card-text">{{ plan.description }}</p>
      
      {% if user.is_authenticated %}
        {% if purchased %}
          <hr>
          <div class="workout-content">
            {{ plan.content|linebreaks }}
          </div>
        {% else %}
          <div class="alert alert-warning" role="alert">
            You must purchase this plan to view the full content.
          </div>
          <a href="{% url 'purchase_workoutplan' plan.id %}" class="btn btn-primary">Purchase this Plan</a>
        {% endif %}
      {% else %}
        <div class="alert alert-info" role="alert">
          Please <a href="{% url 'login' %}?next={{ request.path }}" class="alert-link">log in</a> to purchase and view the full workout plan.
        </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
