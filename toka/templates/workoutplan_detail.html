{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container-fluid py-5" style="background-color: #ffffff;">
  <div class="row g-0">
    <!-- Left Column: Plan Image -->
    <div class="col-md-4">
      {% if plan.image %}
        <img src="{{ plan.image.url }}" alt="{{ plan.title }}" class="img-fluid" style="object-fit: cover; height: 100%; width: 100%;">
      {% else %}
        <img src="{% static 'imgs/default_plan.jpg' %}" alt="{{ plan.title }}" class="img-fluid" style="object-fit: cover; height: 100%; width: 100%;">
      {% endif %}
    </div>

    <!-- Right Column: Plan Details -->
    <div class="col-md-8 p-4">
      <h1>{{ plan.title }}</h1>
      <p><strong>Price:</strong> Â£{{ plan.price }}</p>
      <p>{{ plan.description }}</p>
      
      {% if user.is_authenticated %}
        {% if purchased %}
          <hr>
          <div class="workout-content">
            {{ plan.content|linebreaks }}
          </div>
        {% else %}
          <div class="alert alert-warning" role="alert">
            You must purchase this plan to view the full content.
          </div>
          <a href="{% url 'purchase_workoutplan' plan.id %}" class="btn btn-primary">Purchase this Plan</a>
        {% endif %}
      {% else %}
        <div class="alert alert-info" role="alert">
          Please <a href="{% url 'login' %}?next={{ request.path }}" class="alert-link">log in</a> to purchase and view the full workout plan.
        </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
