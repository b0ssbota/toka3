{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- Hero Section -->
<section class="position-relative text-white" style="background: url('{% static 'imgs/gym.jpg' %}') center/cover no-repeat; min-height: 100vh;">
    <div class="d-flex flex-column align-items-center justify-content-center text-center" style="min-height: 100vh; background-color: rgba(0,0,0,0.5);">
        <h1 class="display-3 fw-bold">SHAPE YOUR BODY</h1>
        <h2 class="display-5 text-warning">BE STRONG</h2>
        <h3 class="mb-4">TRAINING HARD</h3>
        <a href="{% url 'signup' %}" class="btn btn-warning btn-lg mb-3">Get Started</a>
        <a href="{% url 'home' %}" class="btn btn-outline-light btn-lg">Learn More</a>
    </div>
</section>

<!-- Motivation Section -->
<section class="py-5 bg-white text-dark text-center">
    <div class="container">
        <h2 class="fw-bold mb-4">THE MOTIVATION</h2>
        <p>
            Step into the gym and discover the boundless power of your own perseverance. 
            Embrace every rep as a chance to transform your body, your mindset, 
            and ultimately your life. Here, we believe that true strength 
            is built not only through sweat and effort, but also by nurturing 
            a community that pushes each other to conquer new heights.
        </p>
        <p class="mb-0">
            At our facility, progress is measured in moments of courage and commitment. 
            Whether you’re just getting started or striving for that next milestone, 
            we stand behind you every step of the way. Because at the end of the day, 
            it isn’t about being perfect—it’s about persevering and realising 
            your innate potential.
        </p>
    </div>
</section>

<!-- Top 4 Health Plans Section (Merged Style) -->
<section class="py-5 bg-white text-dark">
    <div class="container">
        <!-- Heading & "See More" Link -->
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 class="fw-bold">Health Plans</h2>
            <a href="{% url 'healthplan_list' %}" class="text-decoration-none">See More Plans</a>
        </div>
        
        <!-- Short Description -->
        <p class="mb-4">
            Join our professional coaches on carefully curated Health Plans designed to guide you toward better well-being.
        </p>

        <!-- Row of 4 Plans -->
        <div class="row row-cols-1 row-cols-md-4 g-4">
            {% for plan in top_four_health_plans %}
            <div class="col">
                <div class="card h-100 border-0 shadow">
                    <!-- Plan Image -->
                    {% if plan.image %}
                        <img 
                            src="{{ plan.image.url }}" 
                            class="card-img-top" 
                            alt="{{ plan.title }}"
                            style="height: 180px; object-fit: cover;"
                        >
                    {% else %}
                        <!-- Fallback image -->
                        <img 
                            src="{% static 'imgs/default_plan.jpg' %}" 
                            class="card-img-top" 
                            alt="Health Plan"
                            style="height: 180px; object-fit: cover;"
                        >
                    {% endif %}
                    
                    <div class="card-body">
                        <h5 class="card-title">{{ plan.title }}</h5>
                        <!-- Display creation date (optional) -->
                        <p class="text-muted mb-2">{{ plan.created_at|date:"F j, Y" }}</p>
                        <!-- Short description (15 words) -->
                        <p class="card-text mb-2">{{ plan.description|truncatewords:15 }}</p>
                        <p class="fw-bold mb-0">£{{ plan.price }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Top 4 Workout Plans Section -->
<section class="py-5 bg-white text-dark">
    <div class="container">
        <!-- Heading & "See More" Link -->
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 class="fw-bold">Workout Plans</h2>
            <a href="{% url 'workoutplan_list' %}" class="text-decoration-none">See More Plans</a>
        </div>
        
        <!-- Short Description -->
        <p class="mb-4">
            Explore our top 4 curated workout plans, carefully designed to help you reach your fitness goals.
        </p>

        <!-- Row of 4 Plans -->
        <div class="row row-cols-1 row-cols-md-4 g-4">
            {% for plan in top_four_workout_plans %}
            <div class="col">
                <div class="card h-100 border-0 shadow">
                    <!-- Plan Image (if your WorkoutPlan model has an image field) -->
                    {% if plan.image %}
                        <img 
                            src="{{ plan.image.url }}" 
                            class="card-img-top" 
                            alt="{{ plan.title }}"
                            style="height: 180px; object-fit: cover;"
                        >
                    {% else %}
                        <!-- Fallback image -->
                        <img 
                            src="{% static 'imgs/default_plan.jpg' %}" 
                            class="card-img-top" 
                            alt="Workout Plan"
                            style="height: 180px; object-fit: cover;"
                        >
                    {% endif %}

                    <div class="card-body">
                        <h5 class="card-title">{{ plan.title }}</h5>
                        <!-- Optional: display creation date -->
                        <p class="text-muted mb-2">{{ plan.created_at|date:"F j, Y" }}</p>
                        <!-- Short description (truncate to 15 words) -->
                        <p class="card-text mb-2">{{ plan.description|truncatewords:15 }}</p>
                        <p class="fw-bold mb-0">£{{ plan.price }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
<!-- What We Offer Section -->
<!-- <section class="py-5 bg-dark text-white text-center">
    <div class="container">
        <h2 class="fw-bold mb-4">WHAT WE OFFER</h2>
        <div class="info-cards"> -->
            <!-- Card 1: Health Plan -->
            <!-- <div class="card">
                <img src="{% static 'imgs/gym.jpg' %}" alt="Health Plan">
                <h3>Health Plan</h3>
                <p>Discover our comprehensive health plan options.</p>
                <a href="{% url 'healthplan_list' %}" class="btn btn-warning">Get More Info</a>
            </div> -->
            <!-- Card 2: Work Out Classes -->
            <!-- <div class="card">
                <img src="{% static 'imgs/gym.jpg' %}" alt="Work Out Classes">
                <h3>Work Out Classes</h3>
                <p>Train with certified experts tailored to your goals.</p>
                <a href="{% url 'workout_list' %}" class="btn btn-warning">Get More Info</a>
            </div> -->
            <!-- Card 3: Work Out Plans -->
            <!-- <div class="card">
                <img src="{% static 'imgs/gym.jpg' %}" alt="Work Out Plans">
                <h3>Work Out Plans</h3>
                <p>Flexible routines to transform your body at your own pace.</p>
                <a href="{% url 'workoutplan_list' %}" class="btn btn-warning">Get More Info</a>
            </div>
        </div>
    </div>
</section> -->

<!-- Subscription and Join Us Section -->

<!-- Why Choose Us Section with Left Boxes and Right Image -->
<section class="py-5 bg-dark text-white">
    <div class="container">
      <div class="row align-items-center">
        <!-- Left Column: Boxes -->
        <div class="col-md-6">
          <h2 class="fw-bold mb-4">Why Choose Us?</h2>
          
          <!-- Box 1: Expert Trainers -->
          <div class="mb-4 modern-box-hover p-3 rounded shadow" style="background-color: #ffffff; color: #000000;">
            <div class="d-flex align-items-center">
              <div class="flex-shrink-0 me-3">
                <img src="{% static 'imgs/icon-trainers.png' %}" alt="Expert Trainers" style="width:50px;">
              </div>
              <div class="flex-grow-1">
                <h4 class="fw-bold mb-1">Expert Trainers</h4>
                <p class="mb-0">Our certified trainers offer personalized guidance to ensure every workout counts.</p>
              </div>
            </div>
          </div>
          
          <!-- Box 2: Cutting-Edge Facilities -->
          <div class="mb-4 modern-box-hover p-3 rounded shadow" style="background-color: #ffffff; color: #000000;">
            <div class="d-flex align-items-center">
              <div class="flex-shrink-0 me-3">
                <img src="{% static 'imgs/icon-facilities.png' %}" alt="Cutting-Edge Facilities" style="width:50px;">
              </div>
              <div class="flex-grow-1">
                <h4 class="fw-bold mb-1">Cutting-Edge Facilities</h4>
                <p class="mb-0">Experience top-of-the-line equipment and a modern gym floor designed for you.</p>
              </div>
            </div>
          </div>
          
          <!-- Box 3: Flexible Plans -->
          <div class="mb-4 modern-box-hover p-3 rounded shadow" style="background-color: #ffffff; color: #000000;">
            <div class="d-flex align-items-center">
              <div class="flex-shrink-0 me-3">
                <img src="{% static 'imgs/icon-plans.png' %}" alt="Flexible Plans" style="width:50px;">
              </div>
              <div class="flex-grow-1">
                <h4 class="fw-bold mb-1">Flexible Plans</h4>
                <p class="mb-0">Choose from diverse membership options tailored to fit your busy schedule.</p>
              </div>
            </div>
          </div>
          
          <!-- Box 4: Supportive Community -->
          <div class="mb-4 modern-box-hover p-3 rounded shadow" style="background-color: #ffffff; color: #000000;">
            <div class="d-flex align-items-center">
              <div class="flex-shrink-0 me-3">
                <img src="{% static 'imgs/icon-community.png' %}" alt="Supportive Community" style="width:50px;">
              </div>
              <div class="flex-grow-1">
                <h4 class="fw-bold mb-1">Supportive Community</h4>
                <p class="mb-0">Join a network of motivated members who encourage each other to succeed.</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Right Column: Image -->
        <div class="col-md-6">
          <img src="{% static 'imgs/why-choose-us.jpg' %}" alt="Why Choose Us" class="img-fluid rounded shadow">
        </div>
      </div>
    </div>
  </section>
  
 <!-- Membership Options Section --> 
  <section class="py-5 bg-light">
    <div class="container">
      <h2 class="text-center fw-bold mb-4">Membership Options</h2>
      {% if message %}
        <div class="alert alert-info text-center">{{ message }}</div>
      {% endif %}
      {% if user.is_authenticated %}
        <div class="mb-4 text-center">
          <h4>Your Current Membership: {{ membership.membership_type|title }}</h4>
          <p>Price: &pound;{{ membership.price }}</p>
        </div>
        <div class="row">
          <!-- Free Membership -->
          <div class="col-md-4">
            <div class="card mb-4 shadow">
              <img src="{% static 'imgs/free.jpg' %}" class="card-img-top" alt="Free Membership">
              <div class="card-body text-center">
                <h5 class="card-title">Free Membership</h5>
                <p class="card-text">Enjoy basic access to our gym facilities.</p>
                <p class="card-text fw-bold">&pound;0.00</p>
                {% if membership.membership_type == 'free' %}
                  <button class="btn btn-secondary" disabled>Current Plan</button>
                {% else %}
                  <form method="post">
                    {% csrf_token %}
                    <input type="hidden" name="membership_type" value="free">
                    <button type="submit" name="upgrade" class="btn btn-warning">Downgrade to Free</button>
                  </form>
                {% endif %}
              </div>
            </div>
          </div>
          <!-- Student Membership -->
          <div class="col-md-4">
            <div class="card mb-4 shadow">
              <img src="{% static 'imgs/student.jpg' %}" class="card-img-top" alt="Student Membership">
              <div class="card-body text-center">
                <h5 class="card-title">Student Membership</h5>
                <p class="card-text">Special discount for students with full gym access.</p>
                <p class="card-text fw-bold">&pound;5.99</p>
                {% if membership.membership_type == 'student' %}
                  <button class="btn btn-secondary" disabled>Current Plan</button>
                  <form method="post" class="mt-2">
                    {% csrf_token %}
                    <button type="submit" name="cancel" class="btn btn-danger">Cancel Membership</button>
                  </form>
                {% else %}
                  <form method="post">
                    {% csrf_token %}
                    <input type="hidden" name="membership_type" value="student">
                    <button type="submit" name="upgrade" class="btn btn-warning">Upgrade to Student</button>
                  </form>
                {% endif %}
              </div>
            </div>
          </div>
          <!-- Premium Membership -->
          <div class="col-md-4">
            <div class="card mb-4 shadow">
              <img src="{% static 'imgs/premium.jpg' %}" class="card-img-top" alt="Premium Membership">
              <div class="card-body text-center">
                <h5 class="card-title">Premium Membership</h5>
                <p class="card-text">Unlock all facilities and classes with premium access.</p>
                <p class="card-text fw-bold">&pound;19.99</p>
                {% if membership.membership_type == 'premium' %}
                  <button class="btn btn-secondary" disabled>Current Plan</button>
                  <form method="post" class="mt-2">
                    {% csrf_token %}
                    <button type="submit" name="cancel" class="btn btn-danger">Cancel Membership</button>
                  </form>
                {% else %}
                  <form method="post">
                    {% csrf_token %}
                    <input type="hidden" name="membership_type" value="premium">
                    <button type="submit" name="upgrade" class="btn btn-warning">Upgrade to Premium</button>
                  </form>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      {% else %}
        <div class="text-center">
          <p>Please <a href="/login">login</a> to manage your membership.</p>
        </div>
      {% endif %}
    </div>
  </section>
  
{% endblock content %}
